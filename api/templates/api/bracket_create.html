{% extends "api/base.html" %}

{% block content %}

<p class="instructions">Name bracket, add in competitor details, <br> and you're ready to play.</p>
<div id="new_competitor" class="bracket-create-form">
<form action="" method="post">
    {% csrf_token %}
    <label for="Title">Title</label>
    <input type="text" class="bracket-title" name="Title" maxlength="36" size="17" placeholder="Bracket Title"/> <br/>
    <br/>
    <div id="competitors">
      <div class="new_competitor">
        <input type="text" class="comp_name" name="Competitor1" size="12" autocomplete="off" placeholder="Name"/>
        <input type="text" class="comp_email" name="Competitor_email1" size="12" autocomplete="off" placeholder="Email"/>
        <input type="text" class="comp_phone detectTab" name="Competitor_phone1" size="12" autocomplete="off" placeholder="Phone"/><div class="divider"></div>
      </div>
    </div>
    <p><input type="button" id="add_competitor()" onClick="addCompetitor()" value="Add Competitor" /></p>
    <br/>
    <p><input type="submit" /></p>
</form>
</div>
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script>
    $(document).on('keydown', 'input.detectTab', function(e) {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 9) {
      addCompetitor();
    }
  });
</script>

<script type="text/javascript">

var i = 1;
function addCompetitor() {
    i++;
    var div = document.createElement('div');
    div.className = "new_competitor"
    div.innerHTML = '<input type="text" class="comp_name" name="Competitor'+i+'" size="12" autocomplete="off" placeholder="Name"/>
                     <input type="text" class="comp_email" name="Competitor_email'+i+'" size="12" autocomplete="off" placeholder="Email"/>
                     <input type="text" class="comp_phone detectTab" name="Competitor_phone'+i+'" size="12" autocomplete="off" placeholder="Phone"/>
                     <div class="divider"></div><i id="trash" class="fa fa-trash-o fa-2x" onClick="removeCompetitor(this)">';
    document.getElementById('competitors').appendChild(div);
}

function removeCompetitor(div) {
    document.getElementById('competitors').removeChild( div.parentNode );
    i--;
}
</script>

{% endblock %}
